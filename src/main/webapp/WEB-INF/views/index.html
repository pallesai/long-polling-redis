<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Redis Long Polling Example</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link href="/resources/css/bootstrap.min.css" rel="stylesheet" media="screen" th:href="@{/resources/css/bootstrap.min.css}"/>
    <style type="text/css">
        body {
            padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
            padding-bottom: 40px;
            background-color: #f5f5f5;
        }

        .form-narrow {
            max-width: 490px;
            padding: 19px 29px 29px;
            margin: 0 auto 20px;
            background-color: #fff;
            border: 1px solid #e5e5e5;
            -webkit-border-radius: 5px;
            -moz-border-radius: 5px;
            border-radius: 5px;
            -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, .05);
            -moz-box-shadow: 0 1px 2px rgba(0, 0, 0, .05);
            box-shadow: 0 1px 2px rgba(0, 0, 0, .05);
        }
    </style>


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="/resources/js/html5shiv.js" th:src="@{/resources/js/html5shiv.js}" type="text/javascript"></script>
    <script src="/resources/js/respond.min.js" th:src="@{/resources/js/respond.min.js}" type="text/javascript"></script>
    <![endif]-->

</head>
<body>
<div class="navbar navbar-inverse navbar-fixed-top" th:fragment="header">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/index" th:href="@{/index}">Long Polling Example</a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <!--<li class="active"><a href="#" th:href="@{/}">Home</a></li>-->
                <!--<li><a href="#about">About</a></li>-->
                <!--<li><a href="#contact">Contact</a></li>-->
            </ul>
            <ul class="nav navbar-nav navbar-right">

            </ul>
        </div>
        <!--/.nav-collapse -->
    </div>
</div>

<div class="container">
    <!-- /* Handle the flash message */-->
    <th:block th:if="${message != null}">
        <!-- /* The message code is returned from the @Controller */ -->
        <div th:replace="fragments/alert :: alert (type=${#strings.toLowerCase(message.type)}, message=#{${message.message}}">
            &nbsp;</div>
    </th:block>
    <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ultricies dapibus leo. Praesent eu eros
        sagittis, viverra mi vitae, porttitor orci. Sed ornare ex ut enim imperdiet ultrices. Cras condimentum nunc
        tristique lacus maximus, in maximus leo eleifend. Phasellus in luctus metus. Donec vestibulum metus at augue
        consectetur non, efficitur ac neque. Fusce bibendum tellus iaculis euismod dapibus. Nullam ac elit sed ligula
        feugiat pharetra. Maecenas placerat pretium sem, a sagittis arcu.
    </p>

    <p>
        Praesent pharetra venenatis molestie. Curabitur laoreet egestas purus, non sodales ligula tincidunt in. Nunc
        facilisis mi quis pretium eleifend. Fusce gravida hendrerit euismod. Quisque maximus nunc in nisl bibendum
        euismod. Maecenas consequat orci ac enim egestas, ac imperdiet lectus eleifend. Ut in elementum erat. Vestibulum
    </p>

    <div class="row">
        <div class="col-md-4">
            <h4>Send message</h4>

            <div class="form-group">
                <label for="postMsg">Message to Send</label>
                <input type="text" class="form-control" id="postMsg" placeholder="Message" required="true"/>
            </div>
            <button id="postBtn" class="btn btn-default" type="button">Send</button>

        </div>
        <div class="col-md-4">
            <h4>Long Poller</h4>
            <ul id="longPollList">

            </ul>
        </div>
        <div class="col-md-4">
            <h4>Naive Poller</h4>
            <ul id="naivePollList">

            </ul>
        </div>
    </div>
</div>
</body>

<script th:utext="'var APP = APP || {};'"></script>
<script th:utext="'var APP.pollTime = ${pollTime};'"></script>

<script src="/resources/js/jquery-1.11.3.min.js" th:src="@{/resources/js/jquery-1.11.3.min.js}" type="text/javascript"></script>
<script src="/resources/js/json2.js" th:src="@{/resources/js/json2.js}" type="text/javascript"></script>
<script src="/resources/js/bootstrap.min.js" th:src="@{/resources/js/bootstrap.min.js}" type="text/javascript"></script>
<script src="/resources/js/underscore-min.js" th:src="@{/resources/js/underscore-min.js}" type="text/javascript"></script>
<script src="/resources/js/bootbox.min.js" th:src="@{/resources/js/bootbox.min.js}" type="text/javascript"></script>
<script src="/resources/js/app.js" th:src="@{/resources/js/app.js}" type="text/javascript"></script>

</html>
